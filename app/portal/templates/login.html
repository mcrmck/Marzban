{% extends "base.html" %}

{% block title %}Login - VPN Portal{% endblock %}
{% block content %}
<div class="container">
    <h2>Login to Your Account</h2>
    <p>Please enter your unique Account Number to proceed.</p>

    {% if error %}
        <p class="error">{{ error }}</p> {% endif %}

        <form method="POST" action="{{ url_for('login') }}">
            <div>
                <label for="account_number">Account Number:</label>
                <input type="text" id="account_number" name="account_number" placeholder="e.g., XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX" required>
            </div>
            <button type="submit">Login</button>
        </form>
        <p>New here? <a href="{{ url_for('register_page') }}">Generate your Account Number</a>.</p>

    <p><small>Important: Account numbers are unique and cannot be recovered if lost. Please store yours securely.</small></p>
</div>

<script>
    // Optional: JavaScript for input formatting (UUID example)
    const accountNumberInput = document.getElementById('account_number');
    if (accountNumberInput) {
        accountNumberInput.addEventListener('input', function (e) {
            let value = e.target.value.replace(/[^a-fA-F0-9]/g, ''); // Allow hex characters
            let formattedValue = '';
            // Basic UUID formatting example - can be more sophisticated
            if (value.length > 0) formattedValue += value.substring(0, Math.min(8, value.length));
            if (value.length > 8) formattedValue += '-' + value.substring(8, Math.min(12, value.length));
            if (value.length > 12) formattedValue += '-' + value.substring(12, Math.min(16, value.length));
            if (value.length > 16) formattedValue += '-' + value.substring(16, Math.min(20, value.length));
            if (value.length > 20) formattedValue += '-' + value.substring(20, Math.min(32, value.length));
            e.target.value = formattedValue.toUpperCase();

            // For your XXX-XXX format, the logic would be different:
            // Example for XXX-XXX (this is just illustrative for chunking)
            /*
            let rawValue = e.target.value.replace(/-/g, '');
            let maskedValue = '';
            for (let i = 0; i < rawValue.length; i++) {
                if (i > 0 && i % 3 === 0 && i < (rawValue.length - (rawValue.length % 3 === 0 ? 3 : rawValue.length % 3))) { // Don't add dash at the very end of a full chunk
                    maskedValue += '-';
                }
                maskedValue += rawValue[i];
            }
            e.target.value = maskedValue;
            */
        });
    }
</script>
{% endblock %}